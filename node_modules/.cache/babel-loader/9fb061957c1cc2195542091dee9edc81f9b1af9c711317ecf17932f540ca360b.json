{"ast":null,"code":"var _jsxFileName = \"D:\\\\THUCTAP\\\\1.AWS-frontend (1)\\\\AWS-frontend\\\\frontend\\\\src\\\\context\\\\CartContext.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartContext = /*#__PURE__*/createContext();\nexport const useCart = () => {\n  _s();\n  const context = useContext(CartContext);\n  if (!context) {\n    throw new Error('useCart must be used within a CartProvider');\n  }\n  return context;\n};\n_s(useCart, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport const CartProvider = ({\n  children\n}) => {\n  _s2();\n  const [cartItems, setCartItems] = useState(() => {\n    // Load cart from localStorage on initialization\n    const savedCart = localStorage.getItem('cart');\n    return savedCart ? JSON.parse(savedCart) : [];\n  });\n\n  // Save cart to localStorage whenever it changes\n  useEffect(() => {\n    localStorage.setItem('cart', JSON.stringify(cartItems));\n  }, [cartItems]);\n  const addToCart = product => {\n    setCartItems(prevItems => {\n      // Check if product already exists in cart with same size and color\n      const existingItemIndex = prevItems.findIndex(item => item.id === product.id && item.selectedSize === product.selectedSize && item.selectedColor === product.selectedColor);\n      if (existingItemIndex > -1) {\n        // Update quantity if item exists\n        const newItems = [...prevItems];\n        newItems[existingItemIndex].quantity += product.quantity;\n        return newItems;\n      } else {\n        // Add new item\n        return [...prevItems, {\n          ...product,\n          cartItemId: Date.now()\n        }];\n      }\n    });\n  };\n  const removeFromCart = cartItemId => {\n    setCartItems(prevItems => prevItems.filter(item => item.cartItemId !== cartItemId));\n  };\n  const updateQuantity = (cartItemId, newQuantity) => {\n    if (newQuantity < 1) return;\n    setCartItems(prevItems => prevItems.map(item => item.cartItemId === cartItemId ? {\n      ...item,\n      quantity: newQuantity\n    } : item));\n  };\n  const getCartTotal = () => {\n    return cartItems.reduce((total, item) => {\n      const price = parseFloat(item.price.replace(/[^\\d]/g, ''));\n      return total + price * item.quantity;\n    }, 0);\n  };\n  const getCartCount = () => {\n    return cartItems.reduce((count, item) => count + item.quantity, 0);\n  };\n  const clearCart = () => {\n    setCartItems([]);\n  };\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      cartItems,\n      addToCart,\n      removeFromCart,\n      updateQuantity,\n      getCartTotal,\n      getCartCount,\n      clearCart\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n};\n_s2(CartProvider, \"+wzXqDEcSz7F/qlrllk4BisoKQ8=\");\n_c = CartProvider;\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","jsxDEV","_jsxDEV","CartContext","useCart","_s","context","Error","CartProvider","children","_s2","cartItems","setCartItems","savedCart","localStorage","getItem","JSON","parse","setItem","stringify","addToCart","product","prevItems","existingItemIndex","findIndex","item","id","selectedSize","selectedColor","newItems","quantity","cartItemId","Date","now","removeFromCart","filter","updateQuantity","newQuantity","map","getCartTotal","reduce","total","price","parseFloat","replace","getCartCount","count","clearCart","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/THUCTAP/1.AWS-frontend (1)/AWS-frontend/frontend/src/context/CartContext.jsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\r\n\r\nconst CartContext = createContext();\r\n\r\nexport const useCart = () => {\r\n  const context = useContext(CartContext);\r\n  if (!context) {\r\n    throw new Error('useCart must be used within a CartProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const CartProvider = ({ children }) => {\r\n  const [cartItems, setCartItems] = useState(() => {\r\n    // Load cart from localStorage on initialization\r\n    const savedCart = localStorage.getItem('cart');\r\n    return savedCart ? JSON.parse(savedCart) : [];\r\n  });\r\n\r\n  // Save cart to localStorage whenever it changes\r\n  useEffect(() => {\r\n    localStorage.setItem('cart', JSON.stringify(cartItems));\r\n  }, [cartItems]);\r\n\r\n  const addToCart = (product) => {\r\n    setCartItems(prevItems => {\r\n      // Check if product already exists in cart with same size and color\r\n      const existingItemIndex = prevItems.findIndex(\r\n        item => item.id === product.id && \r\n                item.selectedSize === product.selectedSize && \r\n                item.selectedColor === product.selectedColor\r\n      );\r\n\r\n      if (existingItemIndex > -1) {\r\n        // Update quantity if item exists\r\n        const newItems = [...prevItems];\r\n        newItems[existingItemIndex].quantity += product.quantity;\r\n        return newItems;\r\n      } else {\r\n        // Add new item\r\n        return [...prevItems, { ...product, cartItemId: Date.now() }];\r\n      }\r\n    });\r\n  };\r\n\r\n  const removeFromCart = (cartItemId) => {\r\n    setCartItems(prevItems => prevItems.filter(item => item.cartItemId !== cartItemId));\r\n  };\r\n\r\n  const updateQuantity = (cartItemId, newQuantity) => {\r\n    if (newQuantity < 1) return;\r\n    setCartItems(prevItems =>\r\n      prevItems.map(item =>\r\n        item.cartItemId === cartItemId\r\n          ? { ...item, quantity: newQuantity }\r\n          : item\r\n      )\r\n    );\r\n  };\r\n\r\n  const getCartTotal = () => {\r\n    return cartItems.reduce((total, item) => {\r\n      const price = parseFloat(item.price.replace(/[^\\d]/g, ''));\r\n      return total + (price * item.quantity);\r\n    }, 0);\r\n  };\r\n\r\n  const getCartCount = () => {\r\n    return cartItems.reduce((count, item) => count + item.quantity, 0);\r\n  };\r\n\r\n  const clearCart = () => {\r\n    setCartItems([]);\r\n  };\r\n\r\n  return (\r\n    <CartContext.Provider\r\n      value={{\r\n        cartItems,\r\n        addToCart,\r\n        removeFromCart,\r\n        updateQuantity,\r\n        getCartTotal,\r\n        getCartCount,\r\n        clearCart\r\n      }}\r\n    >\r\n      {children}\r\n    </CartContext.Provider>\r\n  );\r\n};\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}